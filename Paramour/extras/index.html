<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Paramour - The perfect rendezvous" />

  <title>Paramour Examples</title>
  <link rel="shortcut icon" href="../documentation/images/Paramour.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="canonical" href="https://ephellon.github.com/Paramour" />

  <link rel="stylesheet" type="text/css" href="../index.css" />
  <link rel="stylesheet" type="text/css" href="../documentation/css/docs.css" />
  <link rel="stylesheet" type="text/css" href="../documentation/css/tomorrow-night.css" />
  <link rel="stylesheet" type="text/css" href="https://codemirror.net/lib/codemirror.css" />
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,900,400italic,700italic" />
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Product+Sans:400,900,400italic,700italic" />

  <script src='https://codemirror.net/lib/codemirror.js'></script>
  <script src='https://codemirror.net/addon/mode/simple.js'></script>
  <script src='https://codemirror.net/mode/javascript/javascript.js'></script>
  <script src='../paramour/paramour.js'></script>
  <script src="../documentation/vendor/jquery-1.6.4.js"></script>
  <script src='par.min.js'></script>

  <style>
    .CodeMirror, .CodeMirror-gutter {
      background: #1d1f20;
      color: #666;
    }
    .logo.javascript {
      color: #f7df1e;
    }
    h2.logo.javascript {
      background: #f7df1e;
      color: #000;
      text-align: center;
      border: 1px solid #000;
      border-radius: 15px;
    }
    .logo.paramour {
      color: #f42424;
    }
    h2.logo.paramour {
      background: #f42424;
      color: #000;
      text-align: center;
      border: 1px solid #000;
      border-radius: 15px;
    }
    #console {
      width: 100%;
      height: 50%;
    }
  </style>
</head>
<body>
  <div id="fadeout"></div>

  <div id="flybar">
    <a id="logo" href="#top"><img src="../documentation/images/Paramour-Long.png" width="225" height="39" alt="Paramour" /></a>
    <div class="navigation toc">
      <div class="button">
        Table of Contents
      </div>
      <div class="contents menu">
        <a href="#overview">Overview</a>
        <pre>Comments</pre>
        <a href="#normal-comments">Normal Comments</a>
        <a href="#phantoms">Phantoms</a>
        <a href="#docstrings">Docstrings</a>
        <a href="#version-controlling">Version Controlling</a>
        <a href="#version-querying">Version Querying</a>
        <pre>Functions</pre>
        <a href="#keywords">Keywords</a>
        <a href="#functions">Functions</a>
        <a href="#spreads">Spreads...</a>
        <pre>Objects</pre>
        <a href="#arrays-objects-tuples">Arrays, Objects, and Tuples</a>
        <a href="#slicing-splicing-ranges">Array Slicing, Splicing, and Ranges</a>
        <pre>Statements</pre>
        <a href="#case-default">Case &amp; Default Statements</a>
        <pre>Operators</pre>
        <a href="#existence">Existence Operators</a>
        <a href="#custom">Custom Operators</a>
        <pre>Advance</pre>
        <a href="#classes">Classes &amp; Prototypes</a>
        <a href="#generators">Generators</a>
        <a href="#jsunit">JS-Unit</a>
        <a href="#interpolation">Interpolation &amp; Block Strings</a>
        <a href="#script-tags">"text/paramour" Script Tags</a>
        <a href="#versions">Paramour Versions</a>
      </div>
    </div>
    <div class="navigation try">
      <div class="button">
        Try Paramour
        <div class="repl_bridge"></div>
      </div>
      <div class="contents repl_wrapper">
        <div class='code'>
          <pre>
            <textarea id="paramour" class="edit-paramour">alert "Hello Paramour!"</textarea>
          </pre>
          <pre>
            <textarea id="javascript" class="edit-javascript"></textarea>
          </pre>
          <div class="minibutton ok run" title="Ctrl-Enter">Run</div>
          <a class="minibutton permalink" id="permalink">Link</a>
          <div class="minibutton dark sea" id="sea">SEA</div>
          <br class="clear" />
        </div>
      </div>
    </div>
    <div class="navigation annotated">
      <div class="button">
        Paramour Examples &amp; Files
      </div>
      <div class="contents menu">
        <pre>Files</pre>
        <a href="#par" target="_self">Paramour Standard Library</a>
        <pre>Examples</pre>
        <a href="#99" target="_self" title="The infamous 99 bottles of beer example">99 Bottles of Beer</a>
        <a href="#Armstrong" target="_self" title="An Armstrong number finder">Armstrong Number Finder</a>
        <a href="#Pyramid" target="_self" title="A pyramid builder--has both a face and level parameters">Pyramid Builder</a>
        <a href="#Star_Generator" target="_self" title="The star generator I used for my pen 'Titan Logo' on CodePen">Star Generator</a>
        <a href="#String_Radii" target="_self" title="A bunch of radix functions--such as `123..toString(16)`">String Radix</a>
        <a href="#Toggle" target="_self" title="A simple 'Toggle' class">Toggle Class</a>
      </div>
    </div>
  </div>

  <div class="container">
    <h2 id="title">Loading...</h2>

    <p><i>Below is the <b class="paramour logo">Paramour Code (left)</b>, and <b class="javascript logo">JavaScript Code (right)</b></i></p>
    <div class='code'>
      <pre>
        <h2 class="paramour logo">Paramour</h2>
        <textarea class="compile-paramour" type="text/paramour" id="input"></textarea>
      </pre>
      <pre>
        <h2 class="javascript logo">JavaScript</h2>
        <textarea class="compile-javascript" type="text/javascript" id="output"></textarea>
      </pre>
      <div class='minibutton ok' onclick='run($("#output").value)'>run</div>
      <br class='clear' />
    </div>

    <hr>

    <h2>Console</h2>
    <textarea id="console" type="text/javascript"></textarea>
  </div>

  <script type="text/par" id="script"></script>
  <script>
  var options = {
    lineNumbers: false,
    styleActiveLine: true,
    matchBrackets: true,
    indentUnit: 2,
    tabsize: 2,
    indentWithTabs: false,
    readOnly: true,
    autofocus: false,
    lineSeperator: "\n",
    theme: "tomorrow-night-bright",
    blockCommentStart: "###",
    blockCommentEnd: "###",
    lineComment: "#",
    fold: "brace",
    closeBrackets: "( ) [ ] { } \"\"\" \"\"\" ''' ''' ``` ``` \" \" ' ' ` `".split(" ")
  },
  poptions = options, joptions = options, Peditor, Jeditor, __Console__ = console, console, p, j, c;
  poptions.mode = "paramour", poptions.readOnly = false, joptions.mode = "javascript";

  Peditor = CodeMirror.fromTextArea(p = $("#input")[0], poptions);

  (j = $("#output")[0]).innerText = Paramour(p.innerText, true);
  Jeditor = CodeMirror.fromTextArea(j, joptions);

  (c = $("#console")[0]).innerText = "// JavaScript Console\n// console.release() to switch consoles";
  console = CodeMirror.fromTextArea(c, joptions);

  console["[[Value]]"] = "";

  console.log =
  console.dir =
  console.dirxml =
  console.error =
  console.warn =
  console.info =
  console.debug =
  function() {
    var v = console.getValue();
    for(var x = 0, y; x < arguments.length; x++)
      v += ((y = arguments[x]) !== undefined && y !== null? Paramour["typeof"](y): typeof y).toString() + " ";
    return console.setValue(v + "\n");
  };

  console.clear =
  function() {
    console.setValue("// Console was cleared\n");
  };

  console.on("keyup", function(c, e) {
    if(e.which === 13 && e.shiftKey === false)
      run(console["[[Value]]"]);
    else
      console["[[Value]]"] = console.getValue();
  });

  console.release =
  function() {
    console.log("The console has been changed back to the native object");
    return console = __Console__
  }

  function run(value) {
    try {
      value = eval(value);
    } catch(e) {
      return console.error(e);
    }
    return console.log(value);
  }

  (function(exec) {

    if (window === undefined || window === null) return;

    function run(code, embed) {
      return Paramour(code, embed || false);
    }

    function load(url, callback, options, hold) {
      var
      xhr = (window.ActiveXObject)?
        new window.ActiveXObject('Microsoft.XMLHTTP'):
      new window.XMLHttpRequest();

      hold = hold || false;
      options = options || {};
      options.sourceFiles = [url];
      xhr.open('GET', url, true);

      if ('overrideMimeType' in xhr)
        xhr.overrideMimeType('text/plain');

      xhr.onreadystatechange = function() {
        var sts;
        if (xhr.readyState === 4) {
          if ((sts = xhr.status) === 0 || sts === 200) {
            if (!hold)
              run(xhr.responseText);
          } else {
            throw new Error("Unable to load: " + url)
          }
          if(callback)
            return callback(xhr.responseText);
        }
      };
      return xhr.send(null);
    }

    function runScripts() {
      var
      types = ['text/paramour', 'text/par'],
      index = 0,
      scripts = window.document.querySelectorAll('#script'),
      paramours = (function() {
        for (var j = 0, k, r = [], s; j < scripts.length; j++)
          if (k = (s = scripts[j]).type, types.indexOf(k) > -1)
            r.push(s);
        return r;
      })();

      function execute() {
        var input = paramours[index];
        if (input !== undefined && input.constructor === String) {
          run(input);
          index++;
          return execute();
        }
      }

      function fn(script, i) {
        var options, source, compile, input,
            IN = $("#input"),
            OUT = $("#output"),
            title = $("#title");
        options = {
          short: script.type === types[1]
        };

        source = script.src = (location.pathname + "ex/" + ((title.innerHTML = (location.hash + "").slice(1, 255).replace(/_/g, " ")) + ".par"));
        input = script.innerText = "";

        return load(source, function(input) {
          return Peditor.setValue(IN.value = paramours[i] = input), Jeditor.setValue(OUT.value = Paramour(input, true)), execute();
        }, options, true);
      }

      for (var i = 0, j = 0, len = paramours.length; j < len; i = ++j)
        fn(paramours[i], i);

      return execute();
    }

    if (window.addEventListener)
      window.addEventListener('DOMContentLoaded', runScripts, false);
    else
      window.attachEvent('onload', runScripts);

  })(true);

  window.Peditor = Peditor, window.Jeditor = Jeditor;
  window.timeout = window.timeout || 0;

  with(window)
  with(Peditor) {
    on("keyup", function(c, e) {
      clearTimeout(timeout);
      // Shift Ctrl Alt CapsLock PgUp PgDn End Home Left Up Right Down Insert F1 ... F12
      if([16, 17, 18, 20, 33, 34, 35, 36, 37, 38, 39, 40, 45, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123].indexOf(e.which) < 0)
        setTimeout(function() {
          Jeditor.setValue(Paramour(getValue(), true));
        }, 500);
    });
  }

  var closeMenus, compileSource, evalJS, hash, sourceFragment, src;
  sourceFragment = "try:";
  compileSource = function() {
    var el, location, message, results, source;
    source = Peditor.getValue();
    results = $('#javascript');
    window.compiledJS = '';
    try {
      window.compiledJS = Paramour(source, true);
      el = results[0];
      if (el.innerText) {
        el.innerText = window.compiledJS;
      } else {
        results.text(window.compiledJS);
      }
      results.removeClass('error');
      $('.minibutton.run').removeClass('error');
    } catch (error1) {
      location = error1.location, message = error1.message;
      if (location != null) {
        message = "Error on line " + (location.first_line + 1) + ": " + message;
      }
      results.text(message).addClass('error');
      $('.minibutton.run').addClass('error');
    }
    return $('#permalink').attr('href', "#" + sourceFragment + (encodeURIComponent(source)));
  };
  $('#paramour').keyup(function() {
    return compileSource();
  });
  evalJS = function() {
    try {
      return eval(window.compiledJS);
    } catch (error) {
      return alert(error), error;
    }
  };
  window.loadConsole = function(content) {
    Peditor.setValue(content);
    Jeditor.setValue(Paramour(content, true));
    compileSource();
    $('.navigation.try').addClass('active');
    Jeditor.focus();
    Peditor.focus();
    return false;
  };
    window.runConsole = function(content) {
      loadConsole(content);
      return evalJS();
    }
  closeMenus = function() {
    return $('.navigation.active').removeClass('active');
  };
  $('.minibutton.run').click(function() {
    return evalJS();
  });
  $('.navigation').click(function(e) {
    if (e.target.tagName.toLowerCase() === 'a') {
      return;
    }
    if ($(e.target).closest('.repl_wrapper').length) {
      return false;
    }
    if ($(this).hasClass('active')) {
      closeMenus();
    } else {
      closeMenus();
      $(this).addClass('active');
    }
    return false;
  });
  $(document.body).keydown(function(e) {
    if (e.which === 27) {
      closeMenus();
    }
    if (e.which === 13 && (e.metaKey || e.ctrlKey) && $('.minibutton.run:visible').length) {
      return evalJS();
    }
  }).click(function(e) {
    if ($(e.target).hasClass('minibutton')) {
      return false;
    }
    return closeMenus();
  });
  $('#sea').click(function() {
    console.log(Paramour.report, new Date());
    alert("The SEA was written to your console.");
    return;
  });
  $("#permalink").click(function(e) {
    window.location = $(this).attr("href");
    return false;
  });
  hash = decodeURIComponent(location.hash.replace(/^#/, ''));
  if (hash.indexOf(sourceFragment) === 0) {
    src = hash.substr(sourceFragment.length);
    loadConsole(src);
  }
  window.timeout = window.timeout || 0;
  with(window)
  with(Peditor) {
    on("keyup", function() {
      clearTimeout(timeout);
      setTimeout(function() {
        Jeditor.setValue(Paramour(getValue(), true));
      }, 500);
    });
  }
  compileSource();
  </script>
</body>
</html>
