/* Mio Compression Algorithms - Ephellon Dantzler (2017) */
var atob,btoa,encodeUTF8,decodeUTF8,printable="\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",library="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",folded=/^[a-z\d\+\/]+\={0,2}$/i,UTF8=/^[\u0000-\u00ff]+$/i;atob=atob||Mio.unfd;btoa=btoa||Mio.fldd;encodeUTF8=(o=>unescape(encodeURIComponent(o)));decodeUTF8=(o=>decodeURIComponent(escape(o)));var Mio=Mio||{enc:(o,e,t=Mio.UTF8,n)=>(o=(n=Mio).fold(n.enc8(o)),e?(o=n.compress(o),t?n.enc8(o):o):o),dec:(o,e)=>(e=Mio).dec8(Mio.unfold(e.fldd.test(o)?o:e.UTF8.test(o)?e.decompress(e.dec8(o)):e.decompress(o))),sign:(o,e,t)=>Mio.sign(o,e,t)};Mio.enc8=encodeUTF8;Mio.dec8=decodeUTF8;Mio.UTF8=UTF8;Mio.fldd=folded;Mio.book=library;Mio.text=printable;Mio.fold=(o=>{for(var e,t=t||Mio.text,n=n||Mio.book,r={},i=[],l=[],s="000000",c=(n[n.length-1],0),a=n.length;a>c;c++)r[e=(s+c.toString(2)).slice(-6)]=r[e]||n[c];for(c=0,a=o.length;a>c;c++)i.push(("00000000"+o.charCodeAt(c).toString(2)).slice(-8));for(c=0,a=(i=i.join("").split(/([01]{6})/).join(";").replace(/^;|;$/g,"").split(/;+/)).length;a>c;c++)l.push(n[+("0b"+(i[c]+s).slice(0,6))]);return l.join("")});Mio.unfold=(o=>{var e,t=t||Mio.text,n=n||Mio.book,r={},i=[],l=[];if(!folded.test(o))return o;for(var s,c=0,a=n.length;a>c;c++)r[s=n[c]]=r[s]||("000000"+c.toString(2)).slice(-6);for(c=0,a=o.length;a>c;c++)i.push(r[o[c]]);for(c=0,a=(i=i.join("").split(/([01]{8})/).join(";").replace(/^;|;$/g,"").split(/;+/)).length;a>c;c++)8==(e=i[c]).length&&l.push(String.fromCharCode(+("0b"+e)));return l.join("")});Mio.compress=(o=>{var e,t=t||Mio.text,n=n||Mio.book,r={},i=o+"",l=i[0],s=[],c=[],a=255;let d=(o=l,e=t,n=r)=>o.length>1?n["_"+o]:o.charCodeAt(0);for(var h=1,f=i.length;f>h;h++)null!=r["_"+l+(e=i[h])]?l+=e:(s.push(d(l)),r["_"+l+e]=a++,l=e);s.push(d(l));for(h=0,f=s.length,t.charCodeAt(t.length-1);f>h;h++)c.push(String.fromCharCode(s[h]));return c.join("")});Mio.decompress=(o=>{for(var e,t=t||Mio.text,n=n||Mio.book,r={},i=o+"",l=i[0],s={now:"",last:l},c=[l],a=255,d=1,h=i.length;h>d;d++){255>(e=i.charCodeAt(d))?s.now=i[d]:null==(s.now=r["_"+e])&&(s.now=s.last+l);c.push(s.now);l=s.now[0];r["_"+a++]=s.last+l;s.last=s.now}return c.join("")});Mio.sign=function(o,e){var t,n,r=(o+="").split(/([^]{256})/),i=0,l=[];e=2+(14*(e|=0)|0);t=function(o){return o?o.charCodeAt(0):o};r.forEach(function(o,e,t){return""==o?(t=t||this).splice(e,1):i+=o.charCodeAt(0)%13|0});for(var s=0,c=r.length,a=c-1;c>s;s++)for(var d,h,f,u,p,g,M=r[s],b=r[s+1]||"",v=r[a],C=i,U=0,F=M.length,T=v.length,j=T-1,m=e;F>U;++U,--j,i=C+=d+h+f+u+p+g)d=t(M[U])|m|0,h=t(M[F-U-1])-d|0,f=t(v[j])+h|0,u=t(v[T-j])^f|0,p=t(b[U])|u|0,g=t(b[j])^p|0,l.push(((d^~h)<<U+T|F&p|C)^((h|-f)^j+F|F&g|C)^(f&~u)<<p-T>>(T^m)+C^(u<<d^g-F)>>(T^m)+C^((d&h|f^u)^p-g)<<(m&p&g));l.splice(e,l.length-e);n=(32|i)%20+e%16;l.forEach(function(o,e,t){return t.splice(e,1,Math.abs(o^i).toString(n))});l=l.join("").slice(0,256);i=i.toString(n);n=(n*(e||1)).toString(n);return function(o){var e=[],t=[],n=256,r=(o=o||"").length;if(!r)return"";o=" "+o;for(var i=0;n>i;)e.push(i++);for(var l=i=0,s=l;n>i;i++){l=(l+e[i]+o.charCodeAt(i%r))%n;e[s]=e[i];e[i]=e[l];e[l]=e[s]}for(i=-1;n>i;i++)t.push(o[e[i]]||"");return t.join("")}(l)+n+i};
