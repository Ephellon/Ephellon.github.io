/* Mio Compression Algorithms - Ephellon Dantzler (2017) */
var atob,btoa,encodeUTF8,decodeUTF8,printable="\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",library="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",folded=/^[a-z\d\+\/]+\={0,2}$/i,UTF8=/^[\u0000-\u00ff]+$/i;atob=atob||Mio.unfd;btoa=btoa||Mio.fldd;encodeUTF8=(o=>unescape(encodeURIComponent(o)));decodeUTF8=(o=>decodeURIComponent(escape(o)));var Mio=Mio||{enc:(o,e,t=Mio.UTF8,n)=>(o=(n=Mio).fold(n.enc8(o)),e?(o=n.compress(o),t?n.enc8(o):o):o),dec:(o,e)=>(e=Mio).dec8(Mio.unfold(e.fldd.test(o)?o:e.UTF8.test(o)?e.decompress(e.dec8(o)):e.decompress(o))),sign:(o,e,t)=>Mio.sign(o,e,t)};Mio.enc8=encodeUTF8;Mio.dec8=decodeUTF8;Mio.UTF8=UTF8;Mio.fldd=folded;Mio.book=library;Mio.text=printable;Mio.fold=(o=>{for(var e,t=t||Mio.text,n=n||Mio.book,r={},i=[],l=[],d="000000",s=(n[n.length-1],0),c=n.length;c>s;s++)r[e=(d+s.toString(2)).slice(-6)]=r[e]||n[s];for(s=0,c=o.length;c>s;s++)i.push(("00000000"+o.charCodeAt(s).toString(2)).slice(-8));for(s=0,c=(i=i.join("").split(/([01]{6})/).join(";").replace(/^;|;$/g,"").split(/;+/)).length;c>s;s++)l.push(n[+("0b"+(i[s]+d).slice(0,6))]);return l.join("")});Mio.unfold=(o=>{var e,t=t||Mio.text,n=n||Mio.book,r={},i=[],l=[];if(!folded.test(o))return o;for(var d,s=0,c=n.length;c>s;s++)r[d=n[s]]=r[d]||("000000"+s.toString(2)).slice(-6);for(s=0,c=o.length;c>s;s++)i.push(r[o[s]]);for(s=0,c=(i=i.join("").split(/([01]{8})/).join(";").replace(/^;|;$/g,"").split(/;+/)).length;c>s;s++)8==(e=i[s]).length&&l.push(String.fromCharCode(+("0b"+e)));return l.join("")});Mio.compress=(o=>{var e,t=t||Mio.text,n=n||Mio.book,r={},i=o+"",l=i[0],d=[],s=[],c=255;let a=(o=l,e=t,n=r)=>o.length>1?n["_"+o]:o.charCodeAt(0);for(var h=1,f=i.length;f>h;h++)null!=r["_"+l+(e=i[h])]?l+=e:(d.push(a(l)),r["_"+l+e]=c++,l=e);d.push(a(l));for(h=0,f=d.length,t.charCodeAt(t.length-1);f>h;h++)s.push(String.fromCharCode(d[h]));return s.join("")});Mio.decompress=(o=>{for(var e,t=t||Mio.text,n=n||Mio.book,r={},i=o+"",l=i[0],d={now:"",last:l},s=[l],c=255,a=1,h=i.length;h>a;a++){255>(e=i.charCodeAt(a))?d.now=i[a]:null==(d.now=r["_"+e])&&(d.now=d.last+l);s.push(d.now);l=d.now[0];r["_"+c++]=d.last+l;d.last=d.now}return s.join("")});Mio.sign=((o,e,t)=>{var n=n||Mio.text,r=r||Mio.book,i=(o+="").split(/([^]{16})/),l=0;e=18-Math.floor(16*(e||0));t=(t|=!1)?function(o){return null!=o?n.indexOf(o):o}:function(o){return null!=o?o.charCodeAt(0):o};i.forEach(function(o,e,t){return""==o?t.splice(e,1):l+=o.charCodeAt(0)});for(var d=0,s=i.length,c=s-1,a=[];s>d;d++)for(var h,f,M,u,p,g,b=i[d],U=i[d+1]||"",v=i[c],C=l,F=0,T=b.length,j=v.length,m=j-1,w=e;T>F;++F,--m,C=l+=h+f+M+u+p+g)h=0|t(b[F]),f=0|t(b[T-F-1]),M=0|t(v[m]),u=0|t(v[j-m]),p=0|t(U[F]),g=0|t(U[m]),a.push(Math.abs(((h^~f)<<F+j|T&p|C)^((f|-M)^m+T|T&g|C)^(M&~u)<<p-j>>(j^w)+C^(u<<h^g-T)>>(j^w)+C^((h&f|M^u)^p-g)<<(w&p&g)));a.splice(e,a.length-e);a.forEach((o,e,t)=>t.splice(e,1,(o^l).toString(l%20+16)));return a.join("").slice(0,256)});
